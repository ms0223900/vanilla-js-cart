# 購物車測試環境設置

## 測試環境概述

本專案已成功建立完整的測試環境，使用以下技術：

- **Jest**: 測試框架
- **JSDOM**: DOM 模擬環境
- **@testing-library/dom**: DOM 測試工具

## 測試覆蓋範圍

測試涵蓋了購物車的所有主要功能：

### 1. 購物車基本功能測試
- ✅ 添加商品到購物車
- ✅ 從購物車移除商品
- ✅ 更新商品數量
- ✅ 清空購物車

### 2. 購物車計算功能測試
- ✅ 正確計算總金額
- ✅ 正確計算商品總數

### 3. 購物車顯示功能測試
- ✅ 更新購物車顯示
- ✅ 空購物車狀態顯示

### 4. 通知功能測試
- ✅ 添加商品時顯示通知
- ✅ 移除商品時顯示通知

### 5. 錯誤處理測試
- ✅ localStorage 解析失敗的優雅處理
- ✅ 無效商品資料的忽略

### 6. 購物車狀態一致性測試
- ✅ 多次操作後狀態保持正確

### 7. 函數存在性測試
- ✅ 所有必要函數都存在
- ✅ 購物車功能正常運作

## 執行測試

### 安裝依賴
```bash
npm install
```

### 執行所有測試
```bash
npm test
```

### 監聽模式（自動重新執行）
```bash
npm run test:watch
```

### 生成測試覆蓋率報告
```bash
npm run test:coverage
```

## 測試結果

所有 15 個測試用例都已通過，確保：

1. **購物車核心功能正常運作**
2. **DOM 操作正確執行**
3. **localStorage 集成正常**
4. **錯誤處理機制有效**
5. **通知系統運作正常**
6. **狀態管理一致性**

## 技術特點

- 使用 JSDOM 模擬瀏覽器環境
- 完整的 localStorage mock
- 全面的 DOM 元素測試
- 錯誤邊界測試
- 狀態一致性驗證

測試環境已完全建立並驗證，可以確保購物車功能的穩定性和可靠性。
